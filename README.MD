#  Syst√®me de D√©tection et d'Estimation de Valeur de Pi√®ces

## üìå Pr√©sentation du projet

Ce projet impl√©mente une cha√Æne compl√®te de **vision par ordinateur**
permettant :

-    la d√©tection automatique de pi√®ces dans une image\
-    la classification de leur mat√©riau (cuivre, or, bim√©tallique)\
-    l'estimation de leur valeur mon√©taire totale\
-    l'√©valuation quantitative sur un jeu de donn√©es annot√©

Le syst√®me constitue un **framework d'√©valuation complet** avec
g√©n√©ration automatique de rapports et m√©triques de performance.

------------------------------------------------------------------------

## ‚öôÔ∏è Pipeline de traitement

Pour chaque image :

1.  Lecture de l'image (gestion Unicode compatible Windows)
2.  Conversion en niveaux de gris
3.  R√©duction du bruit (filtrage gaussien)
4.  Am√©lioration du contraste (CLAHE)
5.  D√©tection des cercles (Transform√©e de Hough)
6.  Classification du mat√©riau (analyse colorim√©trique LAB)
7.  Estimation de la d√©nomination de chaque pi√®ce
8.  Calcul de la valeur totale
9.  Comparaison avec la v√©rit√© terrain

------------------------------------------------------------------------

##  M√©thodes d'estimation des valeurs

Le syst√®me propose trois strat√©gies diff√©rentes.

### üîπ M√©thode 0 --- Baseline m√©trique bas√©e sur le diam√®tre r√©el

-   Estimation du facteur d'√©chelle pixel ‚Üí millim√®tre
-   Comparaison avec les diam√®tres officiels des pi√®ces
-   Contraintes souples selon le mat√©riau d√©tect√©

‚úî Robuste\
‚úî Compl√®tement automatique\
‚úî Ne n√©cessite pas d'images de r√©f√©rence

------------------------------------------------------------------------

### üîπ M√©thode 1 --- Estimation par ratio de rayon

-   Normalisation par la plus grande pi√®ce d√©tect√©e
-   Comparaison avec des ratios relatifs connus

‚úî Simple et rapide\
‚ö† Sensible aux erreurs de d√©tection

------------------------------------------------------------------------

### üîπ M√©thode 2 --- Matching ORB avec v√©rification g√©om√©trique (CM06)

-   Filtrage des candidats par aire
-   Alignement d'√©chelle
-   Extraction de descripteurs ORB
-   V√©rification g√©om√©trique par RANSAC
-   Fallback automatique vers la baseline si le matching est incertain

‚úî Haute pr√©cision si les r√©f√©rences sont fiables\
‚úî Robuste gr√¢ce au fallback

------------------------------------------------------------------------

##  Structure du projet

    src/
    ‚îÇ
    ‚îú‚îÄ‚îÄ main.py
    ‚îÇ
    ‚îú‚îÄ‚îÄ core/
    ‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py
    ‚îÇ   ‚îú‚îÄ‚îÄ evaluator.py
    ‚îÇ   ‚îú‚îÄ‚îÄ classification.py
    ‚îÇ   ‚îú‚îÄ‚îÄ matching.py
    ‚îÇ   ‚îî‚îÄ‚îÄ io_utils.py
    ‚îÇ
    data/
    ‚îú‚îÄ‚îÄ images/
    ‚îú‚îÄ‚îÄ ref/
    ‚îî‚îÄ‚îÄ annotations.csv

------------------------------------------------------------------------

##  Configuration

Les param√®tres principaux sont d√©finis dans `src/main.py`.

### Exemple :

``` python
CFG = {
    "DETECT_METHOD_ID": 2,
    "CLASSIFY_METHOD_ID": 0,
    "RUN_DEBUG_SINGLE": False,
    "DEBUG_MODE": "none",
    "DEBUG_OUT_DIR": "debug_out",
    "DEBUG_IMAGE_PATH": ".../gp1/25.png"
}
```

### Modes Debug

  Mode   Description
  ------ -------------------------------------
  none   Aucun affichage ni sauvegarde
  show   Affichage des √©tapes interm√©diaires
  save   Sauvegarde des images debug
  both   Affichage + sauvegarde

------------------------------------------------------------------------

## ‚ñ∂ Ex√©cution

### √âvaluation du dataset complet

``` bash
python src/main.py
```

Sorties : - R√©sum√© dans la console - Rapport d√©taill√© :
evaluation_report.txt

------------------------------------------------------------------------

### D√©bogage d'une image unique

Dans `main.py` :

``` python
RUN_DEBUG_SINGLE = True
DEBUG_MODE = "both"
```

------------------------------------------------------------------------

##  M√©triques d'√©valuation

Le syst√®me calcule automatiquement :

-   MAE
-   RMSE
-   Pr√©cision sous tol√©rance
-   Taux de d√©tection
-   Cas d'erreurs d√©taill√©s
-   Images sans annotation
-   Exceptions

R√©sultats export√©s dans :

    evaluation_report.txt

------------------------------------------------------------------------

##  D√©pendances

Python ‚â• 3.9

    pip install -r requirements.txt

------------------------------------------------------------------------

##  Auteur

Projet d√©velopp√© dans le cadre d'exp√©rimentations en vision par
ordinateur.

